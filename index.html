<!DOCTYPE html>
<html lang="id">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
    <title>Sakinah Tracker Premium</title>
    
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Playfair+Display:ital,wght@0,400;0,700;1,400&family=Plus+Jakarta+Sans:wght@300;400;600;700&display=swap" rel="stylesheet">
    
    <link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css" rel="stylesheet">
    
    <script src="https://cdn.tailwindcss.com"></script>
    <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
    <script src="https://unpkg.com/aos@2.3.1/dist/aos.js"></script> <link href="https://unpkg.com/aos@2.3.1/dist/aos.css" rel="stylesheet">
    <script src="https://cdn.jsdelivr.net/npm/sweetalert2@11"></script> <script>
        tailwind.config = {
            darkMode: 'class',
            theme: {
                extend: {
                    fontFamily: {
                        serif: ['"Playfair Display"', 'serif'],
                        sans: ['"Plus Jakarta Sans"', 'sans-serif'],
                    },
                    colors: {
                        gold: {
                            100: '#F9F1D8',
                            400: '#D4AF37',
                            500: '#C5A028',
                            600: '#B08D55' // Metallic gold
                        },
                        midnight: {
                            900: '#0F172A',
                            800: '#1E293B',
                            700: '#334155'
                        }
                    },
                    animation: {
                        'blob': 'blob 7s infinite',
                        'float': 'float 6s ease-in-out infinite',
                        'gradient-x': 'gradient-x 15s ease infinite',
                    },
                    keyframes: {
                        blob: {
                            '0%': { transform: 'translate(0px, 0px) scale(1)' },
                            '33%': { transform: 'translate(30px, -50px) scale(1.1)' },
                            '66%': { transform: 'translate(-20px, 20px) scale(0.9)' },
                            '100%': { transform: 'translate(0px, 0px) scale(1)' },
                        },
                        float: {
                            '0%, 100%': { transform: 'translateY(0)' },
                            '50%': { transform: 'translateY(-10px)' },
                        },
                        'gradient-x': {
                            '0%, 100%': { 'background-position': '0% 50%' },
                            '50%': { 'background-position': '100% 50%' },
                        }
                    }
                }
            }
        }
    </script>

    <style>
        /* Custom Scrollbar */
        ::-webkit-scrollbar { width: 6px; }
        ::-webkit-scrollbar-track { background: #0F172A; }
        ::-webkit-scrollbar-thumb { background: #334155; border-radius: 10px; }
        ::-webkit-scrollbar-thumb:hover { background: #D4AF37; }

        body {
            background: linear-gradient(-45deg, #0F172A, #1E293B, #0F172A, #2C3E50);
            background-size: 400% 400%;
            animation: gradient-x 15s ease infinite;
            color: #F8FAFC;
        }
        
        /* Glassmorphism Premium */
        .glass-panel {
            background: rgba(30, 41, 59, 0.7);
            backdrop-filter: blur(12px);
            -webkit-backdrop-filter: blur(12px);
            border: 1px solid rgba(255, 255, 255, 0.08);
            box-shadow: 0 4px 30px rgba(0, 0, 0, 0.3);
        }

        .gold-glow {
            box-shadow: 0 0 15px rgba(212, 175, 55, 0.3);
        }

        /* Particles Background */
        .stars {
            position: fixed;
            top: 0; left: 0; width: 100%; height: 100%;
            background-image: 
                radial-gradient(1px 1px at 20px 30px, #eee, rgba(0,0,0,0)),
                radial-gradient(1px 1px at 40px 70px, #fff, rgba(0,0,0,0)),
                radial-gradient(1.5px 1.5px at 50px 160px, #ddd, rgba(0,0,0,0)),
                radial-gradient(1.5px 1.5px at 90px 40px, #fff, rgba(0,0,0,0)),
                radial-gradient(2px 2px at 130px 80px, #fff, rgba(0,0,0,0));
            background-repeat: repeat;
            background-size: 200px 200px;
            opacity: 0.3;
            z-index: -1;
            animation: float 60s linear infinite;
        }
    </style>
</head>
<body class="antialiased min-h-screen font-sans selection:bg-gold-500 selection:text-white">
    
    <div class="stars"></div>

    <div id="login-screen" class="fixed inset-0 z-50 flex items-center justify-center p-4 bg-midnight-900/90 backdrop-blur-sm transition-all duration-500">
        <div class="glass-panel w-full max-w-sm rounded-3xl p-8 text-center relative overflow-hidden" data-aos="zoom-in">
            <div class="absolute top-0 -left-4 w-32 h-32 bg-gold-500 rounded-full mix-blend-multiply filter blur-3xl opacity-20 animate-blob"></div>
            <div class="absolute top-0 -right-4 w-32 h-32 bg-purple-500 rounded-full mix-blend-multiply filter blur-3xl opacity-20 animate-blob animation-delay-2000"></div>

            <h1 class="font-serif text-3xl font-bold text-transparent bg-clip-text bg-gradient-to-r from-gold-100 to-gold-500 mb-2">Baiti Jannati</h1>
            <p class="text-gray-400 text-sm mb-8 tracking-wide">Amalan & Muhasabah Tracker</p>
            
            <div class="space-y-4 relative z-10">
                <div class="relative">
                    <select id="login-role" class="w-full bg-midnight-800 border border-gray-700 text-white text-sm rounded-xl focus:ring-gold-500 focus:border-gold-500 block w-full p-4 appearance-none cursor-pointer">
                        <option value="" disabled selected>Pilih Peran</option>
                        <option value="suami">Suami (Imam)</option>
                        <option value="istri">Istri (Makmum)</option>
                    </select>
                    <div class="pointer-events-none absolute inset-y-0 right-0 flex items-center px-4 text-gray-400">
                        <i class="fas fa-chevron-down"></i>
                    </div>
                </div>

                <input type="password" id="login-pin" placeholder="PIN Akses" class="bg-midnight-800 border border-gray-700 text-white text-sm rounded-xl focus:ring-gold-500 focus:border-gold-500 block w-full p-4 text-center tracking-[0.5em]">

                <button onclick="attemptLogin()" class="w-full text-midnight-900 bg-gradient-to-r from-gold-100 to-gold-500 hover:bg-gradient-to-bl focus:ring-4 focus:outline-none focus:ring-gold-500/50 font-bold rounded-xl text-sm px-5 py-4 text-center transition-all transform hover:scale-[1.02]">
                    Buka Catatan Amal
                </button>
            </div>
        </div>
    </div>

    <div id="app-container" class="hidden max-w-md mx-auto pb-24 relative min-h-screen flex flex-col">
        
        <header class="glass-panel sticky top-0 z-40 px-6 py-4 rounded-b-3xl border-t-0 shadow-2xl flex justify-between items-center">
            <div>
                <h2 class="font-serif text-xl font-bold text-gold-400" id="user-greeting">Ahlan wa Sahlan</h2>
                <div class="flex items-center space-x-2 text-xs text-gray-400 mt-1">
                    <i class="far fa-calendar-alt"></i>
                    <span id="header-date">Loading...</span>
                </div>
            </div>
            <div class="relative group">
                <div class="w-10 h-10 rounded-full bg-gradient-to-br from-gold-400 to-yellow-700 p-[2px]">
                    <div class="w-full h-full rounded-full bg-midnight-900 flex items-center justify-center">
                        <i class="fas fa-user text-gold-400"></i>
                    </div>
                </div>
                <button onclick="doLogout()" class="absolute top-10 right-0 hidden group-hover:block bg-red-900 text-white text-xs px-3 py-1 rounded shadow-lg">Logout</button>
            </div>
        </header>

        <div class="mt-6 px-6 flex justify-between items-center" data-aos="fade-down">
            <button onclick="shiftDate(-1)" class="w-10 h-10 rounded-full glass-panel flex items-center justify-center text-gray-400 hover:text-white hover:border-gold-500 transition"><i class="fas fa-chevron-left"></i></button>
            <input type="date" id="date-input" class="bg-transparent border-none text-white font-serif font-bold text-lg text-center focus:outline-none cursor-pointer" onchange="fetchData()">
            <button onclick="shiftDate(1)" class="w-10 h-10 rounded-full glass-panel flex items-center justify-center text-gray-400 hover:text-white hover:border-gold-500 transition"><i class="fas fa-chevron-right"></i></button>
        </div>

        <div class="px-6 mt-6">
            <div class="mb-6 text-center" data-aos="fade-in">
                <p id="daily-quote" class="font-serif italic text-gold-100 text-sm opacity-80 leading-relaxed">"..."</p>
            </div>

            <div class="glass-panel rounded-3xl p-6 relative overflow-hidden" data-aos="zoom-in-up">
                <div class="flex justify-between items-end mb-4">
                    <div>
                        <p class="text-xs text-gray-400 uppercase tracking-widest">Sinergi Hari Ini</p>
                        <h3 class="text-4xl font-serif font-bold text-white mt-1" id="couple-score">0%</h3>
                    </div>
                    <div class="text-right">
                        <span class="px-3 py-1 bg-gold-500/20 border border-gold-500/30 rounded-full text-[10px] text-gold-400 font-bold" id="streak-badge">
                            ðŸ”¥ Streak: 0 Hari
                        </span>
                    </div>
                </div>
                <div class="space-y-3">
                    <div>
                        <div class="flex justify-between text-[10px] text-gray-400 mb-1">
                            <span>Saya</span>
                            <span id="my-score-text">0%</span>
                        </div>
                        <div class="h-2 w-full bg-midnight-900 rounded-full overflow-hidden">
                            <div id="bar-me" class="h-full bg-gradient-to-r from-teal-400 to-teal-600 transition-all duration-1000" style="width: 0%"></div>
                        </div>
                    </div>
                    <div>
                        <div class="flex justify-between text-[10px] text-gray-400 mb-1">
                            <span>Pasangan</span>
                            <span id="partner-score-text">0%</span>
                        </div>
                        <div class="h-2 w-full bg-midnight-900 rounded-full overflow-hidden">
                            <div id="bar-partner" class="h-full bg-gradient-to-r from-pink-400 to-pink-600 transition-all duration-1000" style="width: 0%"></div>
                        </div>
                    </div>
                </div>
            </div>
        </div>

        <div class="px-6 mt-8">
            <div class="flex p-1 bg-midnight-800 rounded-xl relative">
                <div id="tab-bg" class="absolute left-1 top-1 w-[32%] h-[calc(100%-8px)] bg-gold-600 rounded-lg shadow-lg transition-all duration-300"></div>
                <button onclick="setTab('tracker')" class="flex-1 relative z-10 py-2 text-xs font-bold text-white text-center">Amalan</button>
                <button onclick="setTab('stats')" class="flex-1 relative z-10 py-2 text-xs font-bold text-gray-400 text-center hover:text-white transition">Statistik</button>
                <button onclick="setTab('muhasabah')" class="flex-1 relative z-10 py-2 text-xs font-bold text-gray-400 text-center hover:text-white transition">Muhasabah</button>
            </div>
        </div>

        <div id="view-tracker" class="px-6 mt-6 space-y-4 pb-10">
            </div>

        <div id="view-stats" class="px-6 mt-6 hidden space-y-6 pb-10">
            <div class="glass-panel p-4 rounded-2xl" data-aos="fade-up">
                <h3 class="font-serif text-gold-400 mb-4 text-sm">Grafik 7 Hari Terakhir</h3>
                <canvas id="weeklyChart" height="200"></canvas>
            </div>

            <div class="grid grid-cols-2 gap-4">
                <div class="glass-panel p-4 rounded-2xl text-center" data-aos="fade-up" data-aos-delay="100">
                    <div class="w-10 h-10 mx-auto bg-midnight-900 rounded-full flex items-center justify-center text-teal-400 mb-2">
                        <i class="fas fa-check-double"></i>
                    </div>
                    <p class="text-[10px] text-gray-400">Total Pekan Ini</p>
                    <h4 class="text-2xl font-bold text-white" id="stat-total-week">0</h4>
                </div>
                <div class="glass-panel p-4 rounded-2xl text-center" data-aos="fade-up" data-aos-delay="200">
                    <div class="w-10 h-10 mx-auto bg-midnight-900 rounded-full flex items-center justify-center text-gold-400 mb-2">
                        <i class="fas fa-medal"></i>
                    </div>
                    <p class="text-[10px] text-gray-400">Level</p>
                    <h4 class="text-sm font-bold text-white mt-1" id="user-badge">Mujahid Pemula</h4>
                </div>
            </div>

             <div class="glass-panel p-4 rounded-2xl" data-aos="fade-up" data-aos-delay="300">
                <h3 class="font-serif text-white mb-2 text-sm">Konsistensi Bulan Ini</h3>
                <div class="flex justify-between items-end h-12 space-x-1" id="monthly-bars">
                    </div>
             </div>
        </div>

        <div id="view-muhasabah" class="px-6 mt-6 hidden pb-10">
            <div class="glass-panel rounded-2xl p-6" data-aos="fade-up">
                <h3 class="font-serif text-white mb-2"><i class="fas fa-pen-nib text-gold-400 mr-2"></i>Catatan Hati</h3>
                <p class="text-xs text-gray-400 mb-4">Apa yang kamu syukuri atau sesali hari ini?</p>
                <textarea id="muhasabah-input" class="w-full h-32 bg-midnight-900/50 border border-gray-600 rounded-xl p-4 text-sm text-white focus:border-gold-500 focus:ring-1 focus:ring-gold-500 outline-none resize-none transition" placeholder="Tulis di sini..."></textarea>
                <button onclick="saveMuhasabah()" class="mt-4 w-full bg-gold-600 text-white py-2 rounded-lg text-sm font-bold shadow-lg hover:bg-gold-500 transition">Simpan Catatan</button>
            </div>
            
            <div class="mt-6 glass-panel rounded-2xl p-6 opacity-80" data-aos="fade-up" data-aos-delay="100">
                 <h3 class="font-serif text-gray-300 mb-2 text-sm">Catatan Pasangan</h3>
                 <p class="text-sm italic text-gray-400" id="partner-note">"Belum ada catatan..."</p>
            </div>
        </div>

    </div>

    <script type="module">
        // --- AOS INIT ---
        AOS.init({ duration: 800, once: true });

        // --- FIREBASE CONFIG (WAJIB DIISI) ---
        import { initializeApp } from "https://www.gstatic.com/firebasejs/9.6.1/firebase-app.js";
        import { getFirestore, doc, setDoc, getDoc, onSnapshot } from "https://www.gstatic.com/firebasejs/9.6.1/firebase-firestore.js";

        const firebaseConfig = {
            apiKey: "AIzaSyDtuBXr5lOOzoPQeCX2nIRVtWkQ0jW3o1Q",
            authDomain: "amalan-couple.firebaseapp.com",
            projectId: "amalan-couple",
            storageBucket: "amalan-couple.firebasestorage.app",
            messagingSenderId: "148502631530",
            appId: "1:148502631530:web:dfd796e68291197cdb6613",
            measurementId: "G-LREQGQHSWS"
        };

        // --- STATE MANAGEMENT ---
        let db;
        try {
            const app = initializeApp(firebaseConfig);
            db = getFirestore(app);
        } catch(e) {
            console.error("Firebase config error");
        }

        const amalanList = [
            { id: 1, text: "Tilawah 1 Lembar", icon: "fa-quran", desc: "Halaman 2" },
            { id: 2, text: "Al Waqiah", icon: "fa-book-open", desc: "Pembuka Rezeki" },
            { id: 3, text: "Qiyamul Lail", icon: "fa-star-and-crescent", desc: "Minimal 2 Rakaat" },
            { id: 4, text: "Sholat Dhuha", icon: "fa-sun", desc: "Sedekah Sendi" },
            { id: 5, text: "Al Matsurat Pagi", icon: "fa-cloud-sun", desc: "Dzikir Pagi" },
            { id: 6, text: "Al Matsurat Petang", icon: "fa-cloud-moon", desc: "Dzikir Petang" },
            { id: 7, text: "Sedekah", icon: "fa-hand-holding-heart", desc: "Harta atau Senyum" }
        ];

        const quotes = [
            "Maka nikmat Tuhanmu yang manakah yang kamu dustakan?",
            "Sesungguhnya bersama kesulitan ada kemudahan.",
            "Dunia ini perhiasan, dan sebaik-baik perhiasan adalah wanita sholehah.",
            "Sholat adalah tiang agama."
        ];

        let currentUser = localStorage.getItem('ay_user') || null;
        let currentDate = new Date().toISOString().split('T')[0];
        let chartInstance = null;

        // --- INITIALIZATION ---
        window.onload = function() {
            document.getElementById('date-input').value = currentDate;
            document.getElementById('daily-quote').innerText = `"${quotes[Math.floor(Math.random() * quotes.length)]}"`;
            
            if(currentUser) {
                showApp();
            } else {
                document.getElementById('login-screen').classList.remove('hidden');
            }
        };

        // --- AUTH FUNCTIONS ---
        window.attemptLogin = function() {
            const role = document.getElementById('login-role').value;
            const pin = document.getElementById('login-pin').value;
            
            if(!role) return Swal.fire({ icon: 'error', title: 'Oops', text: 'Pilih peran dulu ya!', background: '#1E293B', color: '#fff' });
            if(pin !== "1234") return Swal.fire({ icon: 'error', title: 'Salah PIN', text: 'Coba ingat-ingat lagi.', background: '#1E293B', color: '#fff' });

            currentUser = role;
            localStorage.setItem('ay_user', role);
            
            const loginScreen = document.getElementById('login-screen');
            loginScreen.classList.add('opacity-0');
            setTimeout(() => {
                loginScreen.classList.add('hidden');
                showApp();
            }, 500);
        }

        window.doLogout = function() {
            localStorage.removeItem('ay_user');
            location.reload();
        }

        function showApp() {
            document.getElementById('app-container').classList.remove('hidden');
            document.getElementById('user-greeting').innerText = currentUser === 'suami' ? "Assalamu'alaikum, Imamku" : "Assalamu'alaikum, Bidadariku";
            
            // Format Date UI
            const d = new Date(currentDate);
            const options = { weekday: 'long', day: 'numeric', month: 'long' };
            document.getElementById('header-date').innerText = d.toLocaleDateString('id-ID', options);

            renderTracker();
            fetchData();
            initCharts();
            generateMonthlyBars();
        }

        // --- NAVIGATION ---
        window.shiftDate = function(delta) {
            const d = new Date(document.getElementById('date-input').value);
            d.setDate(d.getDate() + delta);
            currentDate = d.toISOString().split('T')[0];
            document.getElementById('date-input').value = currentDate;
            
            // Update UI Header Date
            const options = { weekday: 'long', day: 'numeric', month: 'long' };
            document.getElementById('header-date').innerText = d.toLocaleDateString('id-ID', options);

            fetchData();
        }

        window.setTab = function(tab) {
            // Hide all
            ['tracker', 'stats', 'muhasabah'].forEach(t => document.getElementById(`view-${t}`).classList.add('hidden'));
            // Show target
            document.getElementById(`view-${tab}`).classList.remove('hidden');
            
            // Animate Background Tab
            const bg = document.getElementById('tab-bg');
            if(tab === 'tracker') bg.style.transform = 'translateX(0%)';
            if(tab === 'stats') bg.style.transform = 'translateX(100%)'; // Rough math for 3 items
            if(tab === 'muhasabah') bg.style.transform = 'translateX(200%)';

            // Re-trigger animations if needed
            if(tab === 'stats') {
                updateChartData(); // Refresh chart visuals
            }
        }

        // --- CORE LOGIC ---
        function renderTracker() {
            const container = document.getElementById('view-tracker');
            container.innerHTML = '';

            amalanList.forEach((item, index) => {
                const delay = index * 50;
                const html = `
                <div class="glass-panel rounded-2xl p-4 flex items-center justify-between group transition-all duration-300 hover:bg-midnight-700/50" data-aos="fade-up" data-aos-delay="${delay}">
                    <div class="flex items-center space-x-4">
                        <div class="w-10 h-10 rounded-full bg-midnight-900 flex items-center justify-center text-gold-500 shadow-inner">
                            <i class="fas ${item.icon}"></i>
                        </div>
                        <div>
                            <h4 class="font-bold text-gray-200 text-sm">${item.text}</h4>
                            <p class="text-[10px] text-gray-500">${item.desc}</p>
                        </div>
                    </div>
                    
                    <label class="cursor-pointer relative">
                        <input type="checkbox" id="check-${item.id}" class="peer sr-only" onchange="toggleAmalan(${item.id})">
                        <div class="w-6 h-6 border-2 border-gray-600 rounded-full peer-checked:bg-gold-500 peer-checked:border-gold-500 transition-all shadow-lg flex items-center justify-center">
                            <i class="fas fa-check text-white text-xs opacity-0 peer-checked:opacity-100 transform scale-50 peer-checked:scale-100 transition-transform"></i>
                        </div>
                        <div class="absolute inset-0 bg-gold-400 blur-lg opacity-0 peer-checked:opacity-40 transition-opacity duration-500"></div>
                    </label>
                </div>`;
                container.insertAdjacentHTML('beforeend', html);
            });
        }

        window.fetchData = function() {
            if(!db) return; // Fallback offline mode visual only
            
            const docRef = doc(db, "daily_logs", currentDate);
            
            onSnapshot(docRef, (docSnap) => {
                const data = docSnap.exists() ? docSnap.data() : {};
                updateUI(data);
            });
        }

        window.toggleAmalan = async function(id) {
            if(!db) return Swal.fire("Mode Offline", "Fitur simpan butuh config Firebase", "warning");

            const checkbox = document.getElementById(`check-${id}`);
            const isChecked = checkbox.checked;
            
            const docRef = doc(db, "daily_logs", currentDate);
            
            // Read first to preserve partner data
            const docSnap = await getDoc(docRef);
            let currentData = docSnap.exists() ? docSnap.data() : {};
            
            if(!currentData[currentUser]) currentData[currentUser] = [];

            if(isChecked) {
                if(!currentData[currentUser].includes(id)) currentData[currentUser].push(id);
                // Sound effect or vibration could go here
            } else {
                currentData[currentUser] = currentData[currentUser].filter(x => x !== id);
            }

            await setDoc(docRef, currentData, { merge: true });
        }

        window.saveMuhasabah = async function() {
            const text = document.getElementById('muhasabah-input').value;
            const docRef = doc(db, "daily_logs", currentDate);
            
            await setDoc(docRef, {
                [`${currentUser}_note`]: text
            }, { merge: true });
            
            Swal.fire({
                icon: 'success',
                title: 'Tercatat',
                text: 'Semoga hari esok lebih baik.',
                background: '#1E293B', color: '#fff',
                timer: 1500, showConfirmButton: false
            });
        }

        function updateUI(data) {
            const myData = data[currentUser] || [];
            const partnerUser = currentUser === 'suami' ? 'istri' : 'suami';
            const partnerData = data[partnerUser] || [];

            // 1. Update Checkboxes
            amalanList.forEach(item => {
                document.getElementById(`check-${item.id}`).checked = myData.includes(item.id);
            });

            // 2. Update Progress Bars
            const total = amalanList.length;
            const myPct = Math.round((myData.length / total) * 100);
            const ptnPct = Math.round((partnerData.length / total) * 100);
            
            document.getElementById('bar-me').style.width = `${myPct}%`;
            document.getElementById('my-score-text').innerText = `${myPct}%`;
            
            document.getElementById('bar-partner').style.width = `${ptnPct}%`;
            document.getElementById('partner-score-text').innerText = `${ptnPct}%`;

            // 3. Update Couple Score
            const avg = Math.round((myPct + ptnPct) / 2);
            document.getElementById('couple-score').innerText = `${avg}%`;

            // 4. Update Badge (Mockup Logic)
            let badge = "Mujahid Pemula";
            if(myPct > 50) badge = "Hamba Istiqomah";
            if(myPct === 100) badge = "Ahli Surga (InsyaAllah)";
            document.getElementById('user-badge').innerText = badge;

            // 5. Update Notes
            const partnerNote = data[`${partnerUser}_note`];
            document.getElementById('partner-note').innerText = partnerNote ? `"${partnerNote}"` : "Belum ada catatan...";
            document.getElementById('muhasabah-input').value = data[`${currentUser}_note`] || "";
        }

        // --- CHARTS & STATS (VISUAL ONLY FOR DEMO) ---
        function initCharts() {
            const ctx = document.getElementById('weeklyChart').getContext('2d');
            chartInstance = new Chart(ctx, {
                type: 'line',
                data: {
                    labels: ['Sen', 'Sel', 'Rab', 'Kam', 'Jum', 'Sab', 'Ahd'],
                    datasets: [
                        {
                            label: 'Saya',
                            data: [65, 59, 80, 81, 56, 55, 40], // Dummy Data
                            borderColor: '#2dd4bf', // Teal
                            backgroundColor: 'rgba(45, 212, 191, 0.1)',
                            fill: true,
                            tension: 0.4
                        },
                        {
                            label: 'Pasangan',
                            data: [28, 48, 40, 19, 86, 27, 90], // Dummy Data
                            borderColor: '#F472B6', // Pink
                            borderDash: [5, 5],
                            tension: 0.4
                        }
                    ]
                },
                options: {
                    responsive: true,
                    plugins: { legend: { labels: { color: '#cbd5e1' } } },
                    scales: {
                        y: { beginAtZero: true, grid: { color: '#334155' }, ticks: { color: '#94a3b8' } },
                        x: { grid: { display: false }, ticks: { color: '#94a3b8' } }
                    }
                }
            });
        }

        function updateChartData() {
            // In real app, query last 7 days from Firestore here
            // chartInstance.update();
        }

        function generateMonthlyBars() {
            const container = document.getElementById('monthly-bars');
            container.innerHTML = '';
            // Generate 30 random bars visual
            for(let i=0; i<30; i++) {
                const h = Math.floor(Math.random() * 100);
                const color = h > 80 ? 'bg-gold-500' : (h > 50 ? 'bg-teal-500' : 'bg-gray-700');
                const div = document.createElement('div');
                div.className = `flex-1 rounded-t-sm ${color} opacity-80 hover:opacity-100 transition`;
                div.style.height = `${h}%`;
                container.appendChild(div);
            }
        }
    </script>
</body>
</html>
